<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Tree View -->
    <record id="view_jwt_token_tree" model="ir.ui.view">
        <field name="name">convive.jwt.token.tree</field>
        <field name="model">convive.jwt.token</field>
        <field name="arch" type="xml">
            <tree string="JWT Tokens">
                <field name="name"/>
                <field name="user_id"/>
                <field name="expiration_date"/>
                <field name="active" widget="boolean_toggle"/>
            </tree>
        </field>
    </record>

    <!-- Form View -->
    <record id="view_jwt_token_form" model="ir.ui.view">
        <field name="name">convive.jwt.token.form</field>
        <field name="model">convive.jwt.token</field>
        <field name="arch" type="xml">
            <form string="JWT Token">
                <header>
                    <button name="revoke_token" string="Revoke Token" type="object" class="btn-danger" 
                            invisible="active == False"/>
                </header>
                <sheet>
                    <div class="oe_title">
                        <h1>
                            <field name="name" placeholder="Token Name"/>
                        </h1>
                    </div>
                    <group>
                        <group>
                            <field name="user_id"/>
                            <field name="expiration_date"/>
                            <field name="active"/>
                        </group>
                        <group>
                            <field name="description"/>
                        </group>
                    </group>
                    <group string="Token">
                        <field name="token" widget="text" placeholder="Token will be generated here"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Search View -->
    <record id="view_jwt_token_search" model="ir.ui.view">
        <field name="name">convive.jwt.token.search</field>
        <field name="model">convive.jwt.token</field>
        <field name="arch" type="xml">
            <search string="JWT Tokens">
                <field name="name"/>
                <field name="user_id"/>
                <filter string="Active" name="active" domain="[('active', '=', True)]"/>
                <filter string="Inactive" name="inactive" domain="[('active', '=', False)]"/>
                <group expand="0" string="Group By">
                    <filter string="User" name="group_user" context="{'group_by': 'user_id'}"/>
                </group>
            </search>
        </field>
    </record>

    <!-- Action -->
    <record id="action_jwt_token" model="ir.actions.act_window">
        <field name="name">JWT Tokens</field>
        <field name="res_model">convive.jwt.token</field>
        <field name="view_mode">tree,form</field>
        <field name="context">{'search_default_active': 1}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Create your first JWT Token
            </p>
            <p>
                Manage JWT tokens for API authentication.
            </p>
        </field>
    </record>

    <!-- Menu Items -->
    <menuitem id="menu_convive_jwt_root"
              name="Convive JWT"
              sequence="10"
              web_icon="convive-jwt,static/description/icon.png"/>

    <menuitem id="menu_jwt_tokens"
              name="JWT Tokens"
              parent="menu_convive_jwt_root"
              action="action_jwt_token"
              sequence="10"/>

    <menuitem id="menu_jwt_configuration"
              name="Configuration"
              parent="menu_convive_jwt_root"
              sequence="100"/>

</odoo>
